'use strict';

var _ava = require('ava');

var _ava2 = _interopRequireDefault(_ava);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _proxyquire = require('proxyquire');

var _proxyquire2 = _interopRequireDefault(_proxyquire);

var _config = require('./config');

var _config2 = _interopRequireDefault(_config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _ava2.default)('Client calls createClient and on error event.', function (t) {
  var redis = {
    createClient: _sinon2.default.stub()
  };
  var client = {
    on: _sinon2.default.spy()
  };
  redis.createClient.onFirstCall().returns(client);
  (0, _proxyquire2.default)('./client', {
    redis: redis
  });
  t.true(redis.createClient.calledWith((0, _config2.default)()));
  t.true(client.on.called);
});

(0, _ava2.default)('The callback to on error does not throw an error', function (t) {
  var redis = {
    createClient: _sinon2.default.stub()
  };
  var client = {
    on: function on(event, f) {
      return t.notThrows(f);
    }
  };
  redis.createClient.onFirstCall().returns(client);
  (0, _proxyquire2.default)('./client', {
    redis: redis
  });
});
//# sourceMappingURL=client.spec.js.map